{"version":3,"file":"js/684.f73ea603.js","mappings":"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","sources":["webpack://hexschool-vue-week6-work/./src/views/ShoppingCart.vue","webpack://hexschool-vue-week6-work/./src/views/ShoppingCart.vue?bf58"],"sourcesContent":["<template>\n  <div>\n    <Loading :active=\"isLoading\" loader=\"dots\" />\n    <h2>購物車</h2>\n    <table class=\"table align-middle\">\n      <thead>\n        <tr>\n          <th></th>\n          <th>品名</th>\n          <th style=\"width: 150px\">數量/單位</th>\n          <th>單價</th>\n          <th style=\"width: 150px\">小計</th>\n        </tr>\n      </thead>\n      <tbody>\n        <template v-if=\"cartData\">\n          <tr v-for=\"item in cartData\" :key=\"item.id\">\n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger btn-sm\"\n                @click=\"deleteProduct(item.id, item.product.title)\"\n              >\n                x\n              </button>\n            </td>\n            <td>\n              {{ item.product.title }}\n            </td>\n            <td>\n              <div class=\"input-group input-group-sm\">\n                <div class=\"input-group mb-3\">\n                  <input\n                    min=\"1\"\n                    type=\"number\"\n                    class=\"form-control\"\n                    v-model.number=\"item.qty\"\n                    @blur=\"updatedCart(item.id, item.qty)\"\n                  />\n                  <span class=\"input-group-text\" id=\"basic-addon2\">{{\n                    item.product.unit\n                  }}</span>\n                </div>\n              </div>\n            </td>\n            <td>\n              {{ item.product.price }}\n            </td>\n            <td>\n              <div style=\"width: 150px\" class=\"text-center\">\n                {{ item.total }}\n              </div>\n            </td>\n          </tr>\n        </template>\n      </tbody>\n      <tfoot>\n        <tr>\n          <td colspan=\"4\" class=\"text-end\"><strong>總計</strong></td>\n          <td>\n            <strong>{{ grand_total }}</strong>\n          </td>\n        </tr>\n      </tfoot>\n    </table>\n  </div>\n</template>\n\n<script>\nconst apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}`\n\nexport default {\n  data() {\n    return {\n      cartData: {},\n      grand_total: 0,\n      isLoading: false\n    }\n  },\n  methods: {\n    async getCarts() {\n      try {\n        this.isLoading = true\n        const { data } = await this.$http.get(`${apiUrl}/cart`)\n        this.cartData = data.data.carts\n        this.isLoading = false\n      } catch (err) {\n        throw new Error(err.messages)\n      }\n    },\n    async updatedCart(id, qty) {\n      try {\n        this.isLoading = true\n        if (qty <= 0) {\n          this.$swal.fire({ icon: 'error', title: '數量不可少於1' })\n          this.getCarts()\n          return\n        }\n        const data = {\n          product_id: id,\n          qty\n        }\n        const res = await this.$http.put(`${apiUrl}/cart/${id}`, {\n          data\n        })\n        this.$swal.fire({ icon: 'success', title: res.data.message })\n        this.getCarts()\n        this.isLoading = false\n      } catch (err) {\n        throw new Error(err.messages)\n      }\n    },\n    async deleteProduct(id, title) {\n      try {\n        const answer = confirm(`確定刪除 ${title} ？`)\n        if (answer) {\n          this.isLoading = true\n          // eslint-disable-next-line\n          const res = await this.$http.delete(`${apiUrl}/cart/${id}`)\n          this.getCarts()\n          this.isLoading = false\n        } else {\n          return\n        }\n      } catch (err) {\n        throw new Error(err.message)\n      }\n    },\n    calcGrandTotal() {\n      const price = this.cartData.map((cart) => {\n        return cart.total\n      })\n      let total = 0\n      price.forEach((price) => (total += price))\n      this.grand_total = total\n    }\n  },\n  watch: {\n    cartData() {\n      this.calcGrandTotal()\n    }\n  },\n  created() {\n    this.getCarts()\n  }\n}\n</script>\n","import { render } from \"./ShoppingCart.vue?vue&type=template&id=a9df9f64\"\nimport script from \"./ShoppingCart.vue?vue&type=script&lang=js\"\nexport * from \"./ShoppingCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/u/Desktop/六角/hexschool-vue-week7-work/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","style","id","colspan","_createElementBlock","_createVNode","_component_Loading","active","$data","loader","_hoisted_1","_hoisted_3","_Fragment","key","_renderList","item","type","onClick","$options","product","title","_hoisted_4","_toDisplayString","min","qty","$event","onBlur","unit","price","total","_hoisted_10","apiUrl","data","cartData","grand_total","isLoading","methods","async","this","$http","get","carts","err","Error","messages","$swal","fire","icon","getCarts","product_id","res","put","message","answer","confirm","delete","calcGrandTotal","map","cart","forEach","watch","created","__exports__","render"],"sourceRoot":""}