{"version":3,"file":"js/322.86693b46.js","mappings":"6NACOA,MAAM,6B,GAETC,EAAAA,EAAAA,GAA4B,MAAxBD,MAAM,UAAS,QAAI,G,GAMhBA,MAAM,YAAYE,MAAA,iB,aAMhBF,MAAM,a,GACLA,MAAM,c,GAGLA,MAAM,a,WAAY,Q,GAEbA,MAAM,e,WAA6C,O,GAExDA,MAAM,0B,GAENA,MAAM,iC,qCAyBXA,MAAM,e,qGAjDdG,EAAAA,EAAAA,IAmDM,MAnDN,EAmDM,EAlDJC,EAAAA,EAAAA,IAA6CC,EAAA,CAAnCC,OAAQC,EAAAA,UAAWC,OAAO,QAApC,mBACAC,IAiDI,aAhDJN,EAAAA,EAAAA,IAuCMO,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IArCcJ,EAAAA,UAAXK,K,WAFTT,EAAAA,EAAAA,IAuCM,OAtCJH,MAAM,0BAELa,IAAKD,EAAQE,IAHhB,EAKEb,EAAAA,EAAAA,GAiCM,MAjCN,EAiCM,EAhCJA,EAAAA,EAAAA,GAIE,OAHCc,IAAKH,EAAQI,SACdhB,MAAM,eACNE,MAAA,uCAHF,WAKAD,EAAAA,EAAAA,GA0BM,MA1BN,EA0BM,EAzBJA,EAAAA,EAAAA,GAEK,KAFL,GAEKgB,EAAAA,EAAAA,IADAL,EAAQM,OAAK,IAElBjB,EAAAA,EAAAA,GAKM,MALN,EAKM,IAHJA,EAAAA,EAAAA,GAA2D,SAA3D,EAA4B,MAAEgB,EAAAA,EAAAA,IAAGL,EAAQO,OAAK,GAG1C,GAFJlB,EAAAA,EAAAA,GAAmC,SAAhC,MAAEgB,EAAAA,EAAAA,IAAGL,EAAQQ,cAAY,IAC5BnB,EAAAA,EAAAA,GAA2D,IAA3D,GAA2DgB,EAAAA,EAAAA,IAAtBL,EAAQS,SAAO,MAEtDpB,EAAAA,EAAAA,GAeM,MAfN,EAeM,EAdJA,EAAAA,EAAAA,GAMS,UALPqB,KAAK,SACLtB,MAAM,4BACLuB,QAAK,GAAEC,EAAAA,iBAAiBZ,EAAQE,KAClC,SAED,EAAAW,IACAxB,EAAAA,EAAAA,GAMS,UALPqB,KAAK,SACLtB,MAAM,eACLuB,QAAK,GAAEC,EAAAA,UAAUZ,EAAQE,GAAE,IAC7B,MAED,EAAAY,cAnCR,OAwCAtB,EAAAA,EAAAA,IAIEuB,EAAA,CAHAC,IAAI,mBACHhB,QAASL,EAAAA,QACTsB,eAAgBL,EAAAA,WAHnB,qCAK+B,IAAfjB,EAAAA,SAASuB,SAAM,WAC7B3B,EAAAA,EAAAA,IAAiC,KAAjC,EAAwB,UAAxB,iB,+BChDFH,MAAM,aACNc,GAAG,eACH,mBAAiB,SACjB,mBAAiB,QACjBiB,SAAS,KACT,kBAAgB,sBAChB,cAAY,OACZH,IAAI,S,GAEC5B,MAAM,gB,GACJA,MAAM,iB,GACJA,MAAM,gB,GACLA,MAAM,cAAcc,GAAG,uB,GAG3Bb,EAAAA,EAAAA,GAKU,UAJRqB,KAAK,SACLtB,MAAM,YACN,kBAAgB,QAChB,aAAW,SAJb,S,GAOGA,MAAM,c,GACJA,MAAM,O,GACJA,MAAM,Y,GAYNA,MAAM,uB,WAAsB,W,GAE5BA,MAAM,c,WAA0C,W,GAG9CA,MAAM,M,GAEJA,MAAM,c,GAERA,MAAM,e,GACTC,EAAAA,EAAAA,GAA4B,SAArB+B,IAAI,OAAM,OAAG,G,GAYvBhC,MAAM,gB,GACTC,EAAAA,EAAAA,GAMS,UALPqB,KAAK,SACLtB,MAAM,oBACN,kBAAgB,SACjB,WAED,G,0CAlERG,EAAAA,EAAAA,IAyEM,MAzEN,EAyEM,EA/DJF,EAAAA,EAAAA,GA8DM,MA9DN,EA8DM,EA7DJA,EAAAA,EAAAA,GA4DM,MA5DN,EA4DM,EA3DJA,EAAAA,EAAAA,GAUM,MAVN,EAUM,EATJA,EAAAA,EAAAA,GAEK,KAFL,GAEKgB,EAAAA,EAAAA,IADAgB,EAAAA,QAAQf,OAAK,GAElBgB,KAOFjC,EAAAA,EAAAA,GAmCM,MAnCN,EAmCM,EAlCJA,EAAAA,EAAAA,GAiCM,MAjCN,EAiCM,EAhCJA,EAAAA,EAAAA,GAWM,MAXN,EAWM,EAVJA,EAAAA,EAAAA,GASO,OARLD,MAAM,aACNE,OAKC,SALD,wFAKC,CAAAiC,gBAAAA,OACiCF,EAAAA,QAAQjB,gBAR5C,WAWFf,EAAAA,EAAAA,GAmBM,MAnBN,EAmBM,IAjBJA,EAAAA,EAAAA,GAAmD,IAAnD,GAAmDgB,EAAAA,EAAAA,IAA1BgB,EAAAA,QAAQG,aAAW,GAiBxC,GAfJnC,EAAAA,EAAAA,GAA4B,UAAAgB,EAAAA,EAAAA,IAAtBgB,EAAAA,QAAQZ,SAAO,IACrBpB,EAAAA,EAAAA,GAGM,MAHN,EAGM,mBAFDgC,EAAAA,QAAQd,OAAQ,MACnB,IAAAlB,EAAAA,EAAAA,GAA6D,MAA7D,EAAwB,OAAGgB,EAAAA,EAAAA,IAAGgB,EAAAA,QAAQb,cAAe,KAAE,MAEzDnB,EAAAA,EAAAA,GASM,MATN,EASM,CARJoC,GAQI,SAPJpC,EAAAA,EAAAA,GAME,SALAqB,KAAK,SACLtB,MAAM,eACNsC,IAAI,I,qCACY/B,EAAAA,IAAGgC,GACnBzB,GAAG,OALL,iBAIkBP,EAAAA,SAAAA,EAAAA,C,QAAhB,eAOVN,EAAAA,EAAAA,GAWM,MAXN,EAWM,CAVJuC,GAOAvC,EAAAA,EAAAA,GAES,UAFDqB,KAAK,SAAStB,MAAM,kBAAmBuB,QAAK,oBAAEC,EAAAA,WAAAA,EAAAA,aAAAA,KAAW,kBAnEzE,KA6EF,OACEiB,KAAM,mBACNC,MAAO,CAAC,WACRC,OACE,MAAO,CACLC,MAAO,GACPC,IAAK,IAGTC,QAAS,CACPC,YACEC,KAAKJ,MAAMK,QAEbC,YACEF,KAAKJ,MAAMO,QAEbC,YACE,GAAIJ,KAAKH,IAAM,EAMb,OALAG,KAAKH,IAAM,OACXG,KAAKK,MAAMC,KAAK,CACdC,KAAM,UACNrC,MAAO,iBAIX8B,KAAKQ,MAAM,iBAAkBR,KAAKpC,QAAQE,GAAIkC,KAAKH,KACnDG,KAAKE,cAGTO,UACE,MAAMC,EAAYC,EAAQ,MAC1BX,KAAKJ,MAAQ,IAAIc,EAAUE,MAAMZ,KAAKa,MAAMjB,MAAO,CACjDkB,UAAU,EACVC,SAAU,a,UC1GhB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,KAEpE,QFmDA,MAAMC,EAAU,wDAEhB,OACExB,KAAM,cACNyB,WAAY,CACVC,iBAAAA,GAEFxB,OACE,MAAO,CACLyB,WAAW,EACXC,SAAU,GACVzD,QAAS,KAGbkC,QAAS,CACPwB,oBACE,IACEtB,KAAKoB,WAAY,EACjB,MAAMG,QAAYvB,KAAKwB,MAAMC,IAAK,GAAER,cACpCjB,KAAKqB,SAAWE,EAAI5B,KAAK0B,SACzBrB,KAAKoB,WAAY,EACjB,MAAOM,GACP,MAAM,IAAIC,MAAMD,EAAIE,WAGxBN,uBAAuBxD,GACrB,IACEkC,KAAKoB,WAAY,EACjB,MAAMG,QAAYvB,KAAKwB,MAAMC,IAAK,GAAER,aAAkBnD,KACtDkC,KAAKpC,QAAU2D,EAAI5B,KAAK/B,QACxBoC,KAAKa,MAAMM,iBAAiBpB,YAC5BC,KAAKoB,WAAY,EACjB,MAAOM,GACP,MAAM,IAAIC,MAAMD,EAAIE,WAGxBN,gBAAgBxD,EAAI+B,GAClB,IACE,GAAIA,GAAO,EAKT,YAJAG,KAAKK,MAAMC,KAAK,CACdC,KAAM,UACNrC,MAAO,kBAIX8B,KAAKoB,WAAY,EACjB,MAAMzB,EAAO,CACXkC,WAAY/D,EACZ+B,IAAAA,GAEI0B,QAAYvB,KAAKwB,MAAMM,KAAM,GAAEb,SAAe,CAAEtB,KAAAA,IACtDK,KAAKoB,WAAY,EACjBpB,KAAKK,MAAMC,KAAK,CACdC,KAAM,UACNrC,MAAOqD,EAAI5B,KAAKiC,UAElB,MAAOF,GACP,MAAM,IAAIC,MAAMD,EAAIE,YAI1BG,UACE/B,KAAKgC,gBGnHT,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://hexschool-vue-week6-work/./src/views/ProductList.vue","webpack://hexschool-vue-week6-work/./src/components/UserProductModal.vue","webpack://hexschool-vue-week6-work/./src/components/UserProductModal.vue?c1cf","webpack://hexschool-vue-week6-work/./src/views/ProductList.vue?f54f"],"sourcesContent":["<template>\n  <div class=\"row row-cols-auto mx-auto\">\n    <Loading :active=\"isLoading\" loader=\"dots\" />\n    <h2 class=\"col-12\">產品列表</h2>\n    <div\n      class=\"col-6 col-sm-4 col-md-3\"\n      v-for=\"product in products\"\n      :key=\"product.id\"\n    >\n      <div class=\"card my-2\" style=\"border: none\">\n        <img\n          :src=\"product.imageUrl\"\n          class=\"card-img-top\"\n          style=\"height: 15rem; object-fit: cover\"\n        />\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">\n            {{ product.title }}\n          </h5>\n          <div class=\"card-text\">\n            特價\n            <strong class=\"text-danger\">$ {{ product.price }} </strong> ／\n            <s>$ {{ product.origin_price }}</s>\n            <p class=\"text-secondary ms-auto\">{{ product.content }}</p>\n          </div>\n          <div class=\"d-flex justify-content-evenly\">\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-secondary\"\n              @click=\"openProductModal(product.id)\"\n            >\n              More\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn btn-main\"\n              @click=\"addToCart(product.id, 1)\"\n            >\n              ＋\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <UserProductModal\n      ref=\"UserProductModal\"\n      :product=\"product\"\n      @after-add-cart=\"addToCart\"\n    />\n    <template v-if=\"products.length === 0\">\n      <h5 class=\"col-12 mt-5\">暫不供應</h5>\n    </template>\n  </div>\n</template>\n\n<script>\nimport UserProductModal from './../components/UserProductModal.vue'\n\nconst apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}`\n\nexport default {\n  name: 'ProductList',\n  components: {\n    UserProductModal\n  },\n  data() {\n    return {\n      isLoading: false,\n      products: {},\n      product: {}\n    }\n  },\n  methods: {\n    async getProducts() {\n      try {\n        this.isLoading = true\n        const res = await this.$http.get(`${apiUrl}/products`)\n        this.products = res.data.products\n        this.isLoading = false\n      } catch (err) {\n        throw new Error(err.message)\n      }\n    },\n    async openProductModal(id) {\n      try {\n        this.isLoading = true\n        const res = await this.$http.get(`${apiUrl}/product/${id}`)\n        this.product = res.data.product\n        this.$refs.UserProductModal.openModal()\n        this.isLoading = false\n      } catch (err) {\n        throw new Error(err.message)\n      }\n    },\n    async addToCart(id, qty) {\n      try {\n        if (qty <= 0) {\n          this.$swal.fire({\n            icon: 'warning',\n            title: '數量不可少於1，請重新選購'\n          })\n          return\n        }\n        this.isLoading = true\n        const data = {\n          product_id: id,\n          qty\n        }\n        const res = await this.$http.post(`${apiUrl}/cart`, { data })\n        this.isLoading = false\n        this.$swal.fire({\n          icon: 'success',\n          title: res.data.message\n        })\n      } catch (err) {\n        throw new Error(err.message)\n      }\n    }\n  },\n  created() {\n    this.getProducts()\n  }\n}\n</script>\n","<template>\n  <div\n    class=\"modal fade\"\n    id=\"productModal\"\n    data-bs-backdrop=\"static\"\n    data-bs-keyboard=\"false\"\n    tabindex=\"-1\"\n    aria-labelledby=\"staticBackdropLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"staticBackdropLabel\">\n            {{ product.title }}\n          </h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-sm-6\">\n              <div\n                class=\"w-100 me-3\"\n                style=\"\n                  width: 200px;\n                  height: 300px;\n                  background-size: cover;\n                  background-position: center;\n                \"\n                :style=\"{ backgroundImage: `url(${product.imageUrl})` }\"\n              ></div>\n            </div>\n            <div class=\"col-sm-6 text-start\">\n              商品特色：\n              <p class=\"text-start\">{{ product.description }}</p>\n              商品內容：\n              <p>{{ product.content }}</p>\n              <div class=\"h5\">\n                {{ product.price }} 元\n                <del class=\"h6 ms-auto\">原價 {{ product.origin_price }} 元</del>\n              </div>\n              <div class=\"input-group\">\n                <label for=\"qty\">數量：</label>\n                <input\n                  type=\"number\"\n                  class=\"form-control\"\n                  min=\"0\"\n                  v-model.number=\"qty\"\n                  id=\"qty\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-secondary\"\n            data-bs-dismiss=\"modal\"\n          >\n            Close\n          </button>\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"addToCart\">\n            加入購物車\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'UserProductModal',\n  props: ['product'],\n  data() {\n    return {\n      modal: '',\n      qty: 1\n    }\n  },\n  methods: {\n    openModal() {\n      this.modal.show()\n    },\n    hideModal() {\n      this.modal.hide()\n    },\n    addToCart() {\n      if (this.qty < 0) {\n        this.qty = 1\n        this.$swal.fire({\n          icon: 'warning',\n          title: '數量不可為0，請重新選購'\n        })\n        return\n      }\n      this.$emit('after-add-cart', this.product.id, this.qty)\n      this.hideModal()\n    }\n  },\n  mounted() {\n    const bootstrap = require('bootstrap')\n    this.modal = new bootstrap.Modal(this.$refs.modal, {\n      keyboard: false,\n      backdrop: 'static'\n    })\n  }\n}\n</script>\n","import { render } from \"./UserProductModal.vue?vue&type=template&id=6cc6b130\"\nimport script from \"./UserProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./UserProductModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/u/Desktop/六角/hexschool-vue-week7-work/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ProductList.vue?vue&type=template&id=690d1685\"\nimport script from \"./ProductList.vue?vue&type=script&lang=js\"\nexport * from \"./ProductList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/u/Desktop/六角/hexschool-vue-week7-work/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_createElementBlock","_createVNode","_component_Loading","active","$data","loader","_hoisted_2","_Fragment","_renderList","product","key","id","src","imageUrl","_toDisplayString","title","price","origin_price","content","type","onClick","$options","_hoisted_13","_hoisted_14","_component_UserProductModal","ref","onAfterAddCart","length","tabindex","for","$props","_hoisted_6","backgroundImage","description","_hoisted_17","min","$event","_hoisted_19","name","props","data","modal","qty","methods","openModal","this","show","hideModal","hide","addToCart","$swal","fire","icon","$emit","mounted","bootstrap","require","Modal","$refs","keyboard","backdrop","__exports__","apiUrl","components","UserProductModal","isLoading","products","async","res","$http","get","err","Error","message","product_id","post","created","getProducts","render"],"sourceRoot":""}